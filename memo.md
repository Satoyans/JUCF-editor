# 細かい色々

## 変数

`%`で挟んだ文字が変数として設定されている場合に置き換える機能です。<br>
例えば、`hello:はろー`と設定している時、`~~~%hello%~~~`という文字列は`~~~はろー~~~`に置き換えられます<br>
`%`の前に`\`を付けることで置き換えられなくなります。<br>
同じキーはエディター、scriptAPI、コマンドの引数の順番で上書きされます。<br>
`form_name`とレイヤー以外全ての場所に使用できます。

## 要素の値

### form_name

コマンドで呼び出す際のフォーム名。<br>
isShowFormFrameが`true`の場合のタイトルにも表示される。<br>
変数は使用できない。

### isShowFormFrame

バニラのマイクラ風の外枠を描画するか<br>
`true`の場合表示され、それ以外の値は全て`false`として扱います。<br>
表示しない場合xボタンがなくなるので注意(Esc,画面端スワイプなどで閉じれはする)<br>
自作でそれっぽく描画しているだけなのでちょっと違うかも<br>

### x,y

フォームの左上を基準とした要素の左上の点の位置です。<br>
値が数字に変換できない場合は`0`として扱います。

### h,w

要素の大きさです。<br>
値が数字に変換できない場合は`0`として扱います。

### text

要素の中央に表示される文字列です。<br>
`is_show_text`が`true`の場合表示されます。<br>
`\n`を使用して改行することが出来ます。<br>
リソースパックの翻訳キーを使用できます。<br>
エディターでは出来る限りゲーム内と合うようにはしていますが画面の大きさや文字数、使う文字によってはずれる可能性があります。<br>
数値に変換されることを防ぐために先頭に`§z`を追加した値が表示されます。<br>
画面中央に配置されるため、変数を使用すると文字ごとに端の位置が異なります。<br>
(マイクラ内のフォントの幅を計算できれば変えられるかもしれない)

### texture

要素のサイズで表示される画像のパスです。<br>
リソースパックに追加されている画像のみ使用できます。<br>
先頭の値が数値だとjson-ui内で正しく処理できません。<br>
`is_show_image`が`true`の場合表示されます。<br>

### hover

要素の上にマウスが重なった際表示されるテキストです。(アイテムにマウスを重ねると出るものと同じ)<br>
`\n`を使用して改行することが出来ます。<br>
空の場合表示されません。

### aux

インベントリーアイテムレンダラーでアイテムを指定するための数値です。<br>
aux = id * 65536 にて求められます。<br>
アイテムのデータ値を足すことで表示できる場合もあります。(石等)<br>
+32768をすることでエンチャントのオーラを付与できます。<br>
idはバージョンによって変更される可能性があります。<br>
このパックのアイテムレンダラーのidにはbedrock-apis氏のbds-docsを利用しています。

### is_show_~~~系

その要素を表示するか。<br>
`true`の場合表示され、それ以外の値は全て`false`として扱います。

## BPを変更する場合

`BP/ts/compile.bat`を使い、jsに変換して書いているためjsファイルは凄く読みにくいと思います。<br>
tscが動く環境でtsのコードを変更することをおすすめします。

- `ts/variable.ts`を変更することでscriptAPIで変数を追加できます。
- `ts/forms.ts`を変更することでscriptAPIでフォームを追加できます。

## できないこと

- スクロール
- カスタムレンダラー系(エンティティ、HP等)
- アニメーション等
- 空白を含むフォーム名

## TODO

- 1.21.20?で@minecraft/uiの更新が来て閉じられるようになるみたいだから対応する
- ブロックとアイテムをテクスチャとリンクするファイルを作る(いつか)
- ctrl+zとctrl+yでundo,redoのショートカットを作成する
